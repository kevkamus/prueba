DELETE FROM TBL_CONCILIACION_DETALLE;
DELETE FROM TBL_CONCILIACION;
DELETE FROM TBL_ERROR;
DELETE FROM TBL_ITEM;
DELETE FROM TBL_CARGA_DETALLE;
DELETE FROM TBL_CARGA_ITEM;
DELETE FROM TBL_KARDEX_DETALLE;
DELETE FROM TBL_KARDEX;
DELETE FROM TBL_USUARIO;
DELETE FROM TBL_PROYECTO;


DROP TABLE TBL_CONCILIACION_DETALLE;
DROP TABLE TBL_CONCILIACION;
DROP TABLE TBL_ERROR;
DROP TABLE TBL_ITEM;
DROP TABLE TBL_CARGA_DETALLE;
DROP TABLE TBL_CARGA_ITEM;
DROP TABLE TBL_KARDEX_DETALLE;
DROP TABLE TBL_KARDEX;
DROP TABLE TBL_USUARIO;
DROP TABLE TBL_PROYECTO;


CREATE TABLE TBL_PROYECTO(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
NOMBRE VARCHAR(100)
);

CREATE TABLE TBL_USUARIO(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
ROL VARCHAR(100),
NOMBRE VARCHAR(100),
USUARIO VARCHAR(50),
CLAVE VARCHAR(20),
ESTADO INT,
PROYECTO INT CONSTRAINT FK_USUARIO_PROYECTO FOREIGN KEY REFERENCES TBL_PROYECTO(ID),
INGRESO INT
);



CREATE TABLE TBL_KARDEX(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
PROYECTO INT CONSTRAINT FK_PROYECTO_KARDEX FOREIGN KEY REFERENCES TBL_PROYECTO(ID),
NOMBRE VARCHAR(100),
REGISTROS INT,
MONEDA INT,
ESTADO INT
);

CREATE TABLE TBL_KARDEX_DETALLE(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
KARDEX INT CONSTRAINT FK_KARDEX_DETALLE FOREIGN KEY REFERENCES TBL_KARDEX(ID),
CODIGO VARCHAR(20),
CODIGO_AUX1 VARCHAR(20),
CODIGO_AUX2 VARCHAR(20),
DESCRIPCION VARCHAR(500),
UNIDAD_MEDIDA VARCHAR(20),
UBICACION VARCHAR(100),
CANTIDAD VARCHAR(20),
ALMACEN VARCHAR(100),
SUBALMACEN VARCHAR(100),
LOTE VARCHAR(50),
SERIE VARCHAR(50),
VALOR_UNITARIO VARCHAR(20)
);

CREATE TABLE TBL_CARGA_ITEM(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
PROYECTO INT CONSTRAINT FK_PROYECTO_ITEM FOREIGN KEY REFERENCES TBL_PROYECTO(ID),
NOMBRE VARCHAR(100),
REGISTROS INT,
ESTADO INT
);


CREATE TABLE TBL_ITEM(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
PROYECTO INT CONSTRAINT FK_ITEM_PROYECTO FOREIGN KEY REFERENCES TBL_PROYECTO(ID),
CODIGO VARCHAR(20),
DESCRIPCION VARCHAR(500),
UNIDAD_MEDIDA  VARCHAR(20),
UBICACION  VARCHAR(100),
CANTIDAD  NUMERIC(16,4),
ALMACEN  VARCHAR(100),
SUBALMACEN VARCHAR(100),
LOTE VARCHAR(50),
SERIE VARCHAR(50),
ESTADO   INT,
TIPO   VARCHAR(5),
CARGA INT CONSTRAINT FK_ITEM_CARGA FOREIGN KEY REFERENCES TBL_CARGA_ITEM(ID),
USUARIO INT CONSTRAINT FK_ITEM_USUARIO FOREIGN KEY REFERENCES TBL_USUARIO(ID),
FECHA DATETIME
);

CREATE TABLE TBL_CARGA_DETALLE 
(ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
CARGA INT CONSTRAINT FK_CARGA_DETALLE FOREIGN KEY REFERENCES TBL_CARGA_ITEM(ID),
CODIGO VARCHAR(20),
CODIGO_AUX1 VARCHAR(20),
CODIGO_AUX2 VARCHAR(20),
DESCRIPCION VARCHAR(500),
UNIDAD_MEDIDA  VARCHAR(20),
UBICACION  VARCHAR(100),
CANTIDAD  VARCHAR(20),
ALMACEN  VARCHAR(100),
SUBALMACEN VARCHAR(100),
LOTE VARCHAR(50),
SERIE VARCHAR(50),
ESTADO VARCHAR(50));

CREATE TABLE TBL_ERROR 
(ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
KARDEX INT CONSTRAINT FK_KARDEX_ERROR FOREIGN KEY REFERENCES TBL_KARDEX(ID),
CARGA INT CONSTRAINT FK_CARGA_ERROR FOREIGN KEY REFERENCES TBL_CARGA_ITEM(ID),
LINEA INT,
COLUMNA VARCHAR(50),
DETALLE VARCHAR(100)
);

CREATE TABLE TBL_CONCILIACION(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
PROYECTO INT CONSTRAINT FK_PROYECTO_CONCILIACION FOREIGN KEY REFERENCES TBL_PROYECTO(ID),
USUARIO INT CONSTRAINT FK_USUARIO_CONCILIACION FOREIGN KEY REFERENCES TBL_USUARIO(ID),
TIPO INT,
FECHA DATETIME
);

CREATE TABLE TBL_CONCILIACION_DETALLE(
ID INT NOT NULL IDENTITY (1,1) PRIMARY KEY,
CONCILIACION INT CONSTRAINT FK_CONCILIACION_DETALLE FOREIGN KEY REFERENCES TBL_CONCILIACION(ID),
CODIGO VARCHAR(20),
DESCRIPCION VARCHAR(500),
SERIE VARCHAR(50),
LOTE VARCHAR(50),
UBICACION VARCHAR(100),
SUBALMACEN VARCHAR(100),
UNIDAD_MEDIDA  VARCHAR(20),
CBASE NUMERIC(16,4),
CCAPTURA NUMERIC(16,4),
CANTIDAD NUMERIC(16,4),
RESULTADO VARCHAR(20),
);

INSERT INTO TBL_USUARIO (ROL, NOMBRE, USUARIO, CLAVE, ESTADO, INGRESO) VALUES ('ROLE_ADMIN','ADMIN','ADMIN','123456',1, 2);
